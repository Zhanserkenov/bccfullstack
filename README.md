# Banking ML Server

Сервер для анализа банковских данных и генерации персонализированных рекомендаций продуктов с пуш-уведомлениями.

## Описание

Этот сервер реализует ML-модель для:
- Анализа поведения клиентов по данным за 3 месяца
- Вычисления ожидаемой выгоды для каждого банковского продукта
- Выбора самого полезного продукта для каждого клиента
- Генерации персонализированных пуш-уведомлений

## Установка

1. Создайте виртуальное окружение:
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Запустите сервер:
```bash
python app.py
```

Сервер будет доступен по адресу: `http://localhost:8080`

## Веб-интерфейс

После запуска сервера откройте браузер и перейдите по адресу `http://localhost:8080` для использования веб-интерфейса.

Веб-интерфейс позволяет:
- Загружать CSV файлы с данными
- Обрабатывать данные и получать рекомендации
- Генерировать персонализированные пуш-уведомления
- Экспортировать результаты в CSV
- Просматривать статистику

## API Endpoints

### 1. Проверка состояния
```
GET /health
```
Возвращает статус сервера.

### 2. Загрузка данных

#### Загрузка данных клиентов
```
POST /upload/clients
Content-Type: multipart/form-data
```
Загружает CSV файл с данными клиентов.

#### Загрузка данных транзакций
```
POST /upload/transactions
Content-Type: multipart/form-data
```
Загружает CSV файл с данными транзакций.

#### Загрузка данных переводов
```
POST /upload/transfers
Content-Type: multipart/form-data
```
Загружает CSV файл с данными переводов.

### 3. Обработка данных
```
POST /process
```
Обрабатывает все загруженные данные и рассчитывает рекомендации.

### 4. Получение рекомендаций
```
GET /recommendations/<client_code>
```
Возвращает топ-4 рекомендованных продукта для конкретного клиента.

### 5. Генерация пуш-уведомлений
```
POST /push-notifications
```
Генерирует персонализированные пуш-уведомления для всех клиентов.

### 6. Экспорт результатов
```
GET /export/csv
```
Возвращает результаты в CSV формате.

### 7. Статистика
```
GET /stats
```
Возвращает статистику по обработанным данным.

## Формат данных

### Клиенты (clients.csv)
- `client_code`: Уникальный код клиента
- `name`: Имя клиента
- `status`: Статус клиента (Студент/Зарплатный клиент/Премиальный клиент/Стандартный клиент)
- `age`: Возраст
- `city`: Город
- `avg_monthly_balance_KZT`: Средний месячный баланс в тенге

### Транзакции (transactions.csv)
- `date`: Дата транзакции
- `category`: Категория трат
- `amount`: Сумма
- `currency`: Валюта
- `client_code`: Код клиента

### Переводы (transfers.csv)
- `date`: Дата перевода
- `type`: Тип перевода
- `direction`: Направление (in/out)
- `amount`: Сумма
- `currency`: Валюта
- `client_code`: Код клиента

## Банковские продукты

Сервер анализирует следующие продукты:
1. Депозит Сберегательный
2. Кредит наличными
3. Карта для путешествий
4. Карта для геймеров
5. Карта с кэшбэком на все
6. Карта с кэшбэком на топ-3 категории
7. Премиальная карта
8. Мультивалютный счет
9. Карта с бесплатными переводами
10. Ипотека

## Пример использования

1. Загрузите данные:
```bash
curl -X POST -F "file=@clients.csv" http://localhost:8080/upload/clients
curl -X POST -F "file=@transactions.csv" http://localhost:8080/upload/transactions
curl -X POST -F "file=@transfers.csv" http://localhost:8080/upload/transfers
```

2. Обработайте данные:
```bash
curl -X POST http://localhost:8080/process
```

3. Получите пуш-уведомления:
```bash
curl -X POST http://localhost:8080/push-notifications
```

4. Экспортируйте результаты:
```bash
curl -X GET http://localhost:8080/export/csv
```

## Выходные данные

Результат работы сервера - CSV файл с колонками:
- `client_code`: Код клиента
- `product`: Рекомендованный продукт
- `push_notification`: Персонализированное пуш-уведомление

## Технические детали

- **Фреймворк**: Flask
- **Обработка данных**: Pandas, NumPy
- **CORS**: Поддержка кросс-доменных запросов
- **Логирование**: Встроенное логирование всех операций
- **Валидация**: Проверка входных данных и обработка ошибок
# d_bcc_ml
# bccfullstack
